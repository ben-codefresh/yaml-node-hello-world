version: '1.0'

steps:
  build-prj:
    type: build
    description: description
    image-name: codefresh-io/git-image
    dockerfile: Dockerfile
    tag: latest

  push-prj:
    type: push
    candidate: ${{build-prj}}
    tag: latest
    credentials:
      username: ${{username}}
      password: ${{password}}
    fail-fast: false

  push-to-stash:
    image: codefresh-io/git-image:latest
    commands:
      - npm -v
      - git remote set-url origin ${{STASH_URL}}
      - git remote -v