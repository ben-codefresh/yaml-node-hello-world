version: '1.0'

steps:
  build-prj:
    type: build
    description: descr
    image-name: ${{DOCKERHUB_USER}}/yaml-node-7
    dockerfile: Dockerfile
    tag: latest

  push-prj:
    type: push
    candidate: ${{build-prj}}
    tag: ${{CF_BRANCH}}-${{CF_REVISION}}
    credentials:
      username: ${{username}}
      password: ${{password}}
    fail-fast: false

  next-step:
    image: node:latest
    commands:
      - npm -v
      - echo branch:$CF-BRANCH
      - echo sha:$CF-SHA